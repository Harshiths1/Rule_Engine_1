"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/rules";
exports.ids = ["pages/api/rules"];
exports.modules = {

/***/ "mongoose":
/*!***************************!*\
  !*** external "mongoose" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("mongoose");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Frules&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Frules.js&middlewareConfigBase64=e30%3D!":
/*!****************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Frules&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Frules.js&middlewareConfigBase64=e30%3D! ***!
  \****************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_rules_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages/api/rules.js */ \"(api)/./pages/api/rules.js\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_rules_js__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_rules_js__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/rules\",\n        pathname: \"/api/rules\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_rules_js__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRnJ1bGVzJnByZWZlcnJlZFJlZ2lvbj0mYWJzb2x1dGVQYWdlUGF0aD0uJTJGcGFnZXMlMkZhcGklMkZydWxlcy5qcyZtaWRkbGV3YXJlQ29uZmlnQmFzZTY0PWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDTDtBQUMxRDtBQUNpRDtBQUNqRDtBQUNBLGlFQUFlLHdFQUFLLENBQUMsZ0RBQVEsWUFBWSxFQUFDO0FBQzFDO0FBQ08sZUFBZSx3RUFBSyxDQUFDLGdEQUFRO0FBQ3BDO0FBQ08sd0JBQXdCLGdIQUFtQjtBQUNsRDtBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxZQUFZO0FBQ1osQ0FBQzs7QUFFRCIsInNvdXJjZXMiOlsid2VicGFjazovL3J1bGUtZW5naW5lLWFwcC8/MDg4NCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQYWdlc0FQSVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvcGFnZXMtYXBpL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IGhvaXN0IH0gZnJvbSBcIm5leHQvZGlzdC9idWlsZC90ZW1wbGF0ZXMvaGVscGVyc1wiO1xuLy8gSW1wb3J0IHRoZSB1c2VybGFuZCBjb2RlLlxuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi4vcGFnZXMvYXBpL3J1bGVzLmpzXCI7XG4vLyBSZS1leHBvcnQgdGhlIGhhbmRsZXIgKHNob3VsZCBiZSB0aGUgZGVmYXVsdCBleHBvcnQpLlxuZXhwb3J0IGRlZmF1bHQgaG9pc3QodXNlcmxhbmQsIFwiZGVmYXVsdFwiKTtcbi8vIFJlLWV4cG9ydCBjb25maWcuXG5leHBvcnQgY29uc3QgY29uZmlnID0gaG9pc3QodXNlcmxhbmQsIFwiY29uZmlnXCIpO1xuLy8gQ3JlYXRlIGFuZCBleHBvcnQgdGhlIHJvdXRlIG1vZHVsZSB0aGF0IHdpbGwgYmUgY29uc3VtZWQuXG5leHBvcnQgY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgUGFnZXNBUElSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuUEFHRVNfQVBJLFxuICAgICAgICBwYWdlOiBcIi9hcGkvcnVsZXNcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9ydWxlc1wiLFxuICAgICAgICAvLyBUaGUgZm9sbG93aW5nIGFyZW4ndCB1c2VkIGluIHByb2R1Y3Rpb24uXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcIlwiXG4gICAgfSxcbiAgICB1c2VybGFuZFxufSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhZ2VzLWFwaS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Frules&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Frules.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./lib/database.js":
/*!*************************!*\
  !*** ./lib/database.js ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Rule: () => (/* binding */ Rule),\n/* harmony export */   dbConnect: () => (/* binding */ dbConnect)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n\nconst MONGODB_URI = process.env.MONGODB_URI;\nif (!MONGODB_URI) {\n    throw new Error(\"Please define the MONGODB_URI environment variable\");\n}\nlet cached = global.mongoose;\nif (!cached) {\n    cached = global.mongoose = {\n        conn: null,\n        promise: null\n    };\n}\nasync function dbConnect() {\n    if (cached.conn) {\n        return cached.conn;\n    }\n    if (!cached.promise) {\n        const opts = {\n            useNewUrlParser: true,\n            useUnifiedTopology: true\n        };\n        cached.promise = mongoose__WEBPACK_IMPORTED_MODULE_0___default().connect(MONGODB_URI, opts).then((mongoose)=>{\n            return mongoose;\n        });\n    }\n    cached.conn = await cached.promise;\n    return cached.conn;\n}\nconst ruleSchema = new (mongoose__WEBPACK_IMPORTED_MODULE_0___default().Schema)({\n    name: String,\n    description: String,\n    ruleString: String,\n    createdAt: {\n        type: Date,\n        default: Date.now\n    },\n    updatedAt: {\n        type: Date,\n        default: Date.now\n    }\n});\nconst Rule = (mongoose__WEBPACK_IMPORTED_MODULE_0___default().models).Rule || mongoose__WEBPACK_IMPORTED_MODULE_0___default().model(\"Rule\", ruleSchema);\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvZGF0YWJhc2UuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFnQztBQUVoQyxNQUFNQyxjQUFjQyxRQUFRQyxHQUFHLENBQUNGLFdBQVc7QUFFM0MsSUFBSSxDQUFDQSxhQUFhO0lBQ2hCLE1BQU0sSUFBSUcsTUFBTTtBQUNsQjtBQUVBLElBQUlDLFNBQVNDLE9BQU9OLFFBQVE7QUFFNUIsSUFBSSxDQUFDSyxRQUFRO0lBQ1hBLFNBQVNDLE9BQU9OLFFBQVEsR0FBRztRQUFFTyxNQUFNO1FBQU1DLFNBQVM7SUFBSztBQUN6RDtBQUVBLGVBQWVDO0lBQ2IsSUFBSUosT0FBT0UsSUFBSSxFQUFFO1FBQ2YsT0FBT0YsT0FBT0UsSUFBSTtJQUNwQjtJQUVBLElBQUksQ0FBQ0YsT0FBT0csT0FBTyxFQUFFO1FBQ25CLE1BQU1FLE9BQU87WUFDWEMsaUJBQWlCO1lBQ2pCQyxvQkFBb0I7UUFDdEI7UUFFQVAsT0FBT0csT0FBTyxHQUFHUix1REFBZ0IsQ0FBQ0MsYUFBYVMsTUFBTUksSUFBSSxDQUFDLENBQUNkO1lBQ3pELE9BQU9BO1FBQ1Q7SUFDRjtJQUNBSyxPQUFPRSxJQUFJLEdBQUcsTUFBTUYsT0FBT0csT0FBTztJQUNsQyxPQUFPSCxPQUFPRSxJQUFJO0FBQ3BCO0FBRUEsTUFBTVEsYUFBYSxJQUFJZix3REFBZSxDQUFDO0lBQ3JDaUIsTUFBTUM7SUFDTkMsYUFBYUQ7SUFDYkUsWUFBWUY7SUFDWkcsV0FBVztRQUFFQyxNQUFNQztRQUFNQyxTQUFTRCxLQUFLRSxHQUFHO0lBQUM7SUFDM0NDLFdBQVc7UUFBRUosTUFBTUM7UUFBTUMsU0FBU0QsS0FBS0UsR0FBRztJQUFDO0FBQzdDO0FBRUEsTUFBTUUsT0FBTzNCLHdEQUFlLENBQUMyQixJQUFJLElBQUkzQixxREFBYyxDQUFDLFFBQVFlO0FBRWpDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcnVsZS1lbmdpbmUtYXBwLy4vbGliL2RhdGFiYXNlLmpzP2VlYTUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbmdvb3NlIGZyb20gJ21vbmdvb3NlJztcblxuY29uc3QgTU9OR09EQl9VUkkgPSBwcm9jZXNzLmVudi5NT05HT0RCX1VSSTtcblxuaWYgKCFNT05HT0RCX1VSSSkge1xuICB0aHJvdyBuZXcgRXJyb3IoJ1BsZWFzZSBkZWZpbmUgdGhlIE1PTkdPREJfVVJJIGVudmlyb25tZW50IHZhcmlhYmxlJyk7XG59XG5cbmxldCBjYWNoZWQgPSBnbG9iYWwubW9uZ29vc2U7XG5cbmlmICghY2FjaGVkKSB7XG4gIGNhY2hlZCA9IGdsb2JhbC5tb25nb29zZSA9IHsgY29ubjogbnVsbCwgcHJvbWlzZTogbnVsbCB9O1xufVxuXG5hc3luYyBmdW5jdGlvbiBkYkNvbm5lY3QoKSB7XG4gIGlmIChjYWNoZWQuY29ubikge1xuICAgIHJldHVybiBjYWNoZWQuY29ubjtcbiAgfVxuXG4gIGlmICghY2FjaGVkLnByb21pc2UpIHtcbiAgICBjb25zdCBvcHRzID0ge1xuICAgICAgdXNlTmV3VXJsUGFyc2VyOiB0cnVlLFxuICAgICAgdXNlVW5pZmllZFRvcG9sb2d5OiB0cnVlLFxuICAgIH07XG5cbiAgICBjYWNoZWQucHJvbWlzZSA9IG1vbmdvb3NlLmNvbm5lY3QoTU9OR09EQl9VUkksIG9wdHMpLnRoZW4oKG1vbmdvb3NlKSA9PiB7XG4gICAgICByZXR1cm4gbW9uZ29vc2U7XG4gICAgfSk7XG4gIH1cbiAgY2FjaGVkLmNvbm4gPSBhd2FpdCBjYWNoZWQucHJvbWlzZTtcbiAgcmV0dXJuIGNhY2hlZC5jb25uO1xufVxuXG5jb25zdCBydWxlU2NoZW1hID0gbmV3IG1vbmdvb3NlLlNjaGVtYSh7XG4gIG5hbWU6IFN0cmluZyxcbiAgZGVzY3JpcHRpb246IFN0cmluZyxcbiAgcnVsZVN0cmluZzogU3RyaW5nLFxuICBjcmVhdGVkQXQ6IHsgdHlwZTogRGF0ZSwgZGVmYXVsdDogRGF0ZS5ub3cgfSxcbiAgdXBkYXRlZEF0OiB7IHR5cGU6IERhdGUsIGRlZmF1bHQ6IERhdGUubm93IH0sXG59KTtcblxuY29uc3QgUnVsZSA9IG1vbmdvb3NlLm1vZGVscy5SdWxlIHx8IG1vbmdvb3NlLm1vZGVsKCdSdWxlJywgcnVsZVNjaGVtYSk7XG5cbmV4cG9ydCB7IGRiQ29ubmVjdCwgUnVsZSB9OyJdLCJuYW1lcyI6WyJtb25nb29zZSIsIk1PTkdPREJfVVJJIiwicHJvY2VzcyIsImVudiIsIkVycm9yIiwiY2FjaGVkIiwiZ2xvYmFsIiwiY29ubiIsInByb21pc2UiLCJkYkNvbm5lY3QiLCJvcHRzIiwidXNlTmV3VXJsUGFyc2VyIiwidXNlVW5pZmllZFRvcG9sb2d5IiwiY29ubmVjdCIsInRoZW4iLCJydWxlU2NoZW1hIiwiU2NoZW1hIiwibmFtZSIsIlN0cmluZyIsImRlc2NyaXB0aW9uIiwicnVsZVN0cmluZyIsImNyZWF0ZWRBdCIsInR5cGUiLCJEYXRlIiwiZGVmYXVsdCIsIm5vdyIsInVwZGF0ZWRBdCIsIlJ1bGUiLCJtb2RlbHMiLCJtb2RlbCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./lib/database.js\n");

/***/ }),

/***/ "(api)/./lib/ruleEngine.js":
/*!***************************!*\
  !*** ./lib/ruleEngine.js ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   combineRules: () => (/* binding */ combineRules),\n/* harmony export */   createRule: () => (/* binding */ createRule),\n/* harmony export */   evaluateRule: () => (/* binding */ evaluateRule)\n/* harmony export */ });\nclass Node {\n    constructor(type, left = null, right = null, value = null, attribute = null, operator = null){\n        this.type = type;\n        this.left = left;\n        this.right = right;\n        this.value = value;\n        this.attribute = attribute;\n        this.operator = operator;\n    }\n}\nfunction tokenize(ruleString) {\n    return ruleString.match(/\\(|\\)|AND|OR|[<>=]+|\\w+|\\d+|'[^']*'/g);\n}\nfunction parseExpression(tokens) {\n    if (tokens[0] === \"(\") {\n        const left = parseExpression(tokens.slice(1));\n        const operator = tokens[tokens.indexOf(left) + 1];\n        const right = parseExpression(tokens.slice(tokens.indexOf(left) + 2, -1));\n        return new Node(\"operator\", left, right, operator);\n    } else {\n        const attribute = tokens[0];\n        const operator = tokens[1];\n        const value = tokens[2].replace(/'/g, \"\");\n        return new Node(\"operand\", null, null, value, attribute, operator);\n    }\n}\nfunction createRule(ruleString) {\n    const tokens = tokenize(ruleString);\n    return parseExpression(tokens);\n}\nfunction combineRules(rules) {\n    if (rules.length === 1) {\n        return createRule(rules[0]);\n    }\n    const combined = new Node(\"operator\", null, null, \"AND\");\n    combined.left = createRule(rules[0]);\n    combined.right = combineRules(rules.slice(1));\n    return combined;\n}\nfunction evaluateRule(root, data) {\n    if (root.type === \"operator\") {\n        if (root.value === \"AND\") {\n            return evaluateRule(root.left, data) && evaluateRule(root.right, data);\n        } else if (root.value === \"OR\") {\n            return evaluateRule(root.left, data) || evaluateRule(root.right, data);\n        }\n    } else {\n        const attributeValue = data[root.attribute];\n        if (attributeValue === undefined) {\n            return false;\n        }\n        switch(root.operator){\n            case \"=\":\n                return attributeValue == root.value;\n            case \">\":\n                return attributeValue > parseFloat(root.value);\n            case \"<\":\n                return attributeValue < parseFloat(root.value);\n            default:\n                return false;\n        }\n    }\n    return false;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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d2VicGFjazovL3J1bGUtZW5naW5lLWFwcC8uL2xpYi9ydWxlRW5naW5lLmpzP2U3YzkiXSwic291cmNlc0NvbnRlbnQiOlsiY2xhc3MgTm9kZSB7XG4gICAgY29uc3RydWN0b3IodHlwZSwgbGVmdCA9IG51bGwsIHJpZ2h0ID0gbnVsbCwgdmFsdWUgPSBudWxsLCBhdHRyaWJ1dGUgPSBudWxsLCBvcGVyYXRvciA9IG51bGwpIHtcbiAgICAgIHRoaXMudHlwZSA9IHR5cGU7XG4gICAgICB0aGlzLmxlZnQgPSBsZWZ0O1xuICAgICAgdGhpcy5yaWdodCA9IHJpZ2h0O1xuICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuICAgICAgdGhpcy5hdHRyaWJ1dGUgPSBhdHRyaWJ1dGU7XG4gICAgICB0aGlzLm9wZXJhdG9yID0gb3BlcmF0b3I7XG4gICAgfVxuICB9XG4gIFxuICBmdW5jdGlvbiB0b2tlbml6ZShydWxlU3RyaW5nKSB7XG4gICAgcmV0dXJuIHJ1bGVTdHJpbmcubWF0Y2goL1xcKHxcXCl8QU5EfE9SfFs8Pj1dK3xcXHcrfFxcZCt8J1teJ10qJy9nKTtcbiAgfVxuICBcbiAgZnVuY3Rpb24gcGFyc2VFeHByZXNzaW9uKHRva2Vucykge1xuICAgIGlmICh0b2tlbnNbMF0gPT09ICcoJykge1xuICAgICAgY29uc3QgbGVmdCA9IHBhcnNlRXhwcmVzc2lvbih0b2tlbnMuc2xpY2UoMSkpO1xuICAgICAgY29uc3Qgb3BlcmF0b3IgPSB0b2tlbnNbdG9rZW5zLmluZGV4T2YobGVmdCkgKyAxXTtcbiAgICAgIGNvbnN0IHJpZ2h0ID0gcGFyc2VFeHByZXNzaW9uKHRva2Vucy5zbGljZSh0b2tlbnMuaW5kZXhPZihsZWZ0KSArIDIsIC0xKSk7XG4gICAgICByZXR1cm4gbmV3IE5vZGUoXCJvcGVyYXRvclwiLCBsZWZ0LCByaWdodCwgb3BlcmF0b3IpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBhdHRyaWJ1dGUgPSB0b2tlbnNbMF07XG4gICAgICBjb25zdCBvcGVyYXRvciA9IHRva2Vuc1sxXTtcbiAgICAgIGNvbnN0IHZhbHVlID0gdG9rZW5zWzJdLnJlcGxhY2UoLycvZywgJycpO1xuICAgICAgcmV0dXJuIG5ldyBOb2RlKFwib3BlcmFuZFwiLCBudWxsLCBudWxsLCB2YWx1ZSwgYXR0cmlidXRlLCBvcGVyYXRvcik7XG4gICAgfVxuICB9XG4gIFxuICBleHBvcnQgZnVuY3Rpb24gY3JlYXRlUnVsZShydWxlU3RyaW5nKSB7XG4gICAgY29uc3QgdG9rZW5zID0gdG9rZW5pemUocnVsZVN0cmluZyk7XG4gICAgcmV0dXJuIHBhcnNlRXhwcmVzc2lvbih0b2tlbnMpO1xuICB9XG4gIFxuICBleHBvcnQgZnVuY3Rpb24gY29tYmluZVJ1bGVzKHJ1bGVzKSB7XG4gICAgaWYgKHJ1bGVzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgcmV0dXJuIGNyZWF0ZVJ1bGUocnVsZXNbMF0pO1xuICAgIH1cbiAgICBcbiAgICBjb25zdCBjb21iaW5lZCA9IG5ldyBOb2RlKFwib3BlcmF0b3JcIiwgbnVsbCwgbnVsbCwgXCJBTkRcIik7XG4gICAgY29tYmluZWQubGVmdCA9IGNyZWF0ZVJ1bGUocnVsZXNbMF0pO1xuICAgIGNvbWJpbmVkLnJpZ2h0ID0gY29tYmluZVJ1bGVzKHJ1bGVzLnNsaWNlKDEpKTtcbiAgICByZXR1cm4gY29tYmluZWQ7XG4gIH1cbiAgXG4gIGV4cG9ydCBmdW5jdGlvbiBldmFsdWF0ZVJ1bGUocm9vdCwgZGF0YSkge1xuICAgIGlmIChyb290LnR5cGUgPT09IFwib3BlcmF0b3JcIikge1xuICAgICAgaWYgKHJvb3QudmFsdWUgPT09IFwiQU5EXCIpIHtcbiAgICAgICAgcmV0dXJuIGV2YWx1YXRlUnVsZShyb290LmxlZnQsIGRhdGEpICYmIGV2YWx1YXRlUnVsZShyb290LnJpZ2h0LCBkYXRhKTtcbiAgICAgIH0gZWxzZSBpZiAocm9vdC52YWx1ZSA9PT0gXCJPUlwiKSB7XG4gICAgICAgIHJldHVybiBldmFsdWF0ZVJ1bGUocm9vdC5sZWZ0LCBkYXRhKSB8fCBldmFsdWF0ZVJ1bGUocm9vdC5yaWdodCwgZGF0YSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGF0dHJpYnV0ZVZhbHVlID0gZGF0YVtyb290LmF0dHJpYnV0ZV07XG4gICAgICBpZiAoYXR0cmlidXRlVmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICBcbiAgICAgIHN3aXRjaCAocm9vdC5vcGVyYXRvcikge1xuICAgICAgICBjYXNlIFwiPVwiOlxuICAgICAgICAgIHJldHVybiBhdHRyaWJ1dGVWYWx1ZSA9PSByb290LnZhbHVlO1xuICAgICAgICBjYXNlIFwiPlwiOlxuICAgICAgICAgIHJldHVybiBhdHRyaWJ1dGVWYWx1ZSA+IHBhcnNlRmxvYXQocm9vdC52YWx1ZSk7XG4gICAgICAgIGNhc2UgXCI8XCI6XG4gICAgICAgICAgcmV0dXJuIGF0dHJpYnV0ZVZhbHVlIDwgcGFyc2VGbG9hdChyb290LnZhbHVlKTtcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfSJdLCJuYW1lcyI6WyJOb2RlIiwiY29uc3RydWN0b3IiLCJ0eXBlIiwibGVmdCIsInJpZ2h0IiwidmFsdWUiLCJhdHRyaWJ1dGUiLCJvcGVyYXRvciIsInRva2VuaXplIiwicnVsZVN0cmluZyIsIm1hdGNoIiwicGFyc2VFeHByZXNzaW9uIiwidG9rZW5zIiwic2xpY2UiLCJpbmRleE9mIiwicmVwbGFjZSIsImNyZWF0ZVJ1bGUiLCJjb21iaW5lUnVsZXMiLCJydWxlcyIsImxlbmd0aCIsImNvbWJpbmVkIiwiZXZhbHVhdGVSdWxlIiwicm9vdCIsImRhdGEiLCJhdHRyaWJ1dGVWYWx1ZSIsInVuZGVmaW5lZCIsInBhcnNlRmxvYXQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./lib/ruleEngine.js\n");

/***/ }),

/***/ "(api)/./pages/api/rules.js":
/*!****************************!*\
  !*** ./pages/api/rules.js ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _lib_database__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../lib/database */ \"(api)/./lib/database.js\");\n/* harmony import */ var _lib_ruleEngine__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../lib/ruleEngine */ \"(api)/./lib/ruleEngine.js\");\n\n\nasync function handler(req, res) {\n    await (0,_lib_database__WEBPACK_IMPORTED_MODULE_0__.dbConnect)();\n    switch(req.method){\n        case \"GET\":\n            try {\n                const rules = await _lib_database__WEBPACK_IMPORTED_MODULE_0__.Rule.find({});\n                res.status(200).json(rules);\n            } catch (error) {\n                res.status(400).json({\n                    success: false\n                });\n            }\n            break;\n        case \"POST\":\n            try {\n                const rule = await _lib_database__WEBPACK_IMPORTED_MODULE_0__.Rule.create(req.body);\n                res.status(201).json({\n                    success: true,\n                    data: rule\n                });\n            } catch (error) {\n                res.status(400).json({\n                    success: false\n                });\n            }\n            break;\n        case \"PUT\":\n            try {\n                const { id, data } = req.body;\n                const rule = await _lib_database__WEBPACK_IMPORTED_MODULE_0__.Rule.findById(id);\n                if (!rule) {\n                    return res.status(400).json({\n                        success: false\n                    });\n                }\n                const ast = (0,_lib_ruleEngine__WEBPACK_IMPORTED_MODULE_1__.createRule)(rule.ruleString);\n                const result = (0,_lib_ruleEngine__WEBPACK_IMPORTED_MODULE_1__.evaluateRule)(ast, data);\n                res.status(200).json({\n                    success: true,\n                    result\n                });\n            } catch (error) {\n                res.status(400).json({\n                    success: false\n                });\n            }\n            break;\n        default:\n            res.status(400).json({\n                success: false\n            });\n            break;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9wYWdlcy9hcGkvcnVsZXMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQXFEO0FBQ1c7QUFFakQsZUFBZUksUUFBUUMsR0FBRyxFQUFFQyxHQUFHO0lBQzVDLE1BQU1OLHdEQUFTQTtJQUVmLE9BQVFLLElBQUlFLE1BQU07UUFDaEIsS0FBSztZQUNILElBQUk7Z0JBQ0YsTUFBTUMsUUFBUSxNQUFNUCwrQ0FBSUEsQ0FBQ1EsSUFBSSxDQUFDLENBQUM7Z0JBQy9CSCxJQUFJSSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDSDtZQUN2QixFQUFFLE9BQU9JLE9BQU87Z0JBQ2ROLElBQUlJLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7b0JBQUVFLFNBQVM7Z0JBQU07WUFDeEM7WUFDQTtRQUVGLEtBQUs7WUFDSCxJQUFJO2dCQUNGLE1BQU1DLE9BQU8sTUFBTWIsK0NBQUlBLENBQUNjLE1BQU0sQ0FBQ1YsSUFBSVcsSUFBSTtnQkFDdkNWLElBQUlJLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7b0JBQUVFLFNBQVM7b0JBQU1JLE1BQU1IO2dCQUFLO1lBQ25ELEVBQUUsT0FBT0YsT0FBTztnQkFDZE4sSUFBSUksTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztvQkFBRUUsU0FBUztnQkFBTTtZQUN4QztZQUNBO1FBRUYsS0FBSztZQUNILElBQUk7Z0JBQ0YsTUFBTSxFQUFFSyxFQUFFLEVBQUVELElBQUksRUFBRSxHQUFHWixJQUFJVyxJQUFJO2dCQUM3QixNQUFNRixPQUFPLE1BQU1iLCtDQUFJQSxDQUFDa0IsUUFBUSxDQUFDRDtnQkFDakMsSUFBSSxDQUFDSixNQUFNO29CQUNULE9BQU9SLElBQUlJLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7d0JBQUVFLFNBQVM7b0JBQU07Z0JBQy9DO2dCQUNBLE1BQU1PLE1BQU1sQiwyREFBVUEsQ0FBQ1ksS0FBS08sVUFBVTtnQkFDdEMsTUFBTUMsU0FBU25CLDZEQUFZQSxDQUFDaUIsS0FBS0g7Z0JBQ2pDWCxJQUFJSSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO29CQUFFRSxTQUFTO29CQUFNUztnQkFBTztZQUMvQyxFQUFFLE9BQU9WLE9BQU87Z0JBQ2ROLElBQUlJLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7b0JBQUVFLFNBQVM7Z0JBQU07WUFDeEM7WUFDQTtRQUVGO1lBQ0VQLElBQUlJLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7Z0JBQUVFLFNBQVM7WUFBTTtZQUN0QztJQUNKO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ydWxlLWVuZ2luZS1hcHAvLi9wYWdlcy9hcGkvcnVsZXMuanM/N2E0OCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBkYkNvbm5lY3QsIFJ1bGUgfSBmcm9tICcuLi8uLi9saWIvZGF0YWJhc2UnO1xuaW1wb3J0IHsgY3JlYXRlUnVsZSwgZXZhbHVhdGVSdWxlIH0gZnJvbSAnLi4vLi4vbGliL3J1bGVFbmdpbmUnO1xuXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBoYW5kbGVyKHJlcSwgcmVzKSB7XG4gIGF3YWl0IGRiQ29ubmVjdCgpO1xuXG4gIHN3aXRjaCAocmVxLm1ldGhvZCkge1xuICAgIGNhc2UgJ0dFVCc6XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBydWxlcyA9IGF3YWl0IFJ1bGUuZmluZCh7fSk7XG4gICAgICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHJ1bGVzKTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgc3VjY2VzczogZmFsc2UgfSk7XG4gICAgICB9XG4gICAgICBicmVhaztcblxuICAgIGNhc2UgJ1BPU1QnOlxuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcnVsZSA9IGF3YWl0IFJ1bGUuY3JlYXRlKHJlcS5ib2R5KTtcbiAgICAgICAgcmVzLnN0YXR1cygyMDEpLmpzb24oeyBzdWNjZXNzOiB0cnVlLCBkYXRhOiBydWxlIH0pO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgcmVzLnN0YXR1cyg0MDApLmpzb24oeyBzdWNjZXNzOiBmYWxzZSB9KTtcbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuXG4gICAgY2FzZSAnUFVUJzpcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHsgaWQsIGRhdGEgfSA9IHJlcS5ib2R5O1xuICAgICAgICBjb25zdCBydWxlID0gYXdhaXQgUnVsZS5maW5kQnlJZChpZCk7XG4gICAgICAgIGlmICghcnVsZSkge1xuICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IHN1Y2Nlc3M6IGZhbHNlIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGFzdCA9IGNyZWF0ZVJ1bGUocnVsZS5ydWxlU3RyaW5nKTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gZXZhbHVhdGVSdWxlKGFzdCwgZGF0YSk7XG4gICAgICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgc3VjY2VzczogdHJ1ZSwgcmVzdWx0IH0pO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgcmVzLnN0YXR1cyg0MDApLmpzb24oeyBzdWNjZXNzOiBmYWxzZSB9KTtcbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuXG4gICAgZGVmYXVsdDpcbiAgICAgIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgc3VjY2VzczogZmFsc2UgfSk7XG4gICAgICBicmVhaztcbiAgfVxufSJdLCJuYW1lcyI6WyJkYkNvbm5lY3QiLCJSdWxlIiwiY3JlYXRlUnVsZSIsImV2YWx1YXRlUnVsZSIsImhhbmRsZXIiLCJyZXEiLCJyZXMiLCJtZXRob2QiLCJydWxlcyIsImZpbmQiLCJzdGF0dXMiLCJqc29uIiwiZXJyb3IiLCJzdWNjZXNzIiwicnVsZSIsImNyZWF0ZSIsImJvZHkiLCJkYXRhIiwiaWQiLCJmaW5kQnlJZCIsImFzdCIsInJ1bGVTdHJpbmciLCJyZXN1bHQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./pages/api/rules.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Frules&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Frules.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();